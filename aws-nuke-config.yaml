regions:
  - ap-northeast-2
  - us-east-1
  - eu-west-1
  - ap-south-1
  - ap-southeast-1
  - ap-southeast-3
  - me-central-1
  - us-west-2

account-blocklist:
  - "337909764629" # Management Account
  - "246705294232" # Custom-Customer-Resources
  - "062484260092" # CleverTap SaaS Platform

resource-types:
  excludes:
    - S3Object # Excluded because S3 bucket removal handles removing all S3Objects
    - ServiceCatalogTagOption # Excluded due to https://github.com/rebuy-de/aws-nuke/issues/515
    - ServiceCatalogTagOptionPortfolioAttachment # Excluded due to https://github.com/rebuy-de/aws-nuke/issues/515
    - FMSNotificationChannel # Excluded because it's not available
    - FMSPolicy # Excluded because it's not available
    - MachineLearningMLModel # Excluded due to ML being unavailable
    - MachineLearningDataSource # Excluded due to ML being unavailable
    - MachineLearningBranchPrediction # Excluded due to ML being unavailable
    - MachineLearningEvaluation # Excluded due to ML being unavailable
    - RoboMakerDeploymentJob # Deprecated Service
    - RoboMakerFleet # Deprecated Service
    - RoboMakerRobot # Deprecated Service
    - RoboMakerSimulationJob
    - OSPackage
    - RoboMakerRobotApplication
    - RoboMakerSimulationApplication
    - OpsWorksApp # Deprecated service
    - OpsWorksInstance # Deprecated service
    - OpsWorksLayer # Deprecated service
    - OpsWorksUserProfile # Deprecated service
    - OpsWorksCMBackup # Deprecated service
    - OpsWorksCMServer # Deprecated service
    - OpsWorksCMServerState # Deprecated service
    - CodeStarProject # Deprecated service
    - CodeStarConnection # Deprecated service
    - CodeStarNotification # Deprecated service
    - Cloud9Environment # Deprecated service
    - CloudSearchDomain # Deprecated service
    - RedshiftServerlessSnapshot # Deprecated service
    - RedshiftServerlessNamespace # Deprecated service
    - RedshiftServerlessWorkgroup # Deprecated service
    - AWS::Timestream::ScheduledQuery # Deprecated service
    - ElasticTranscoderPipeline # Deprecated service
    - ConfigServiceConfigurationRecorder # Control Tower managed
    - ConfigServiceDeliveryChannel # Control Tower managed


presets:
  organization:
    filters:
      IAMSAMLProvider:
        - property: ARN
          type: contains
          value: "AWSSSO"
      IAMRole:
        - property: Name
          type: contains
          value: "OrganizationAccountAccessRole"
      IAMRolePolicyAttachment:
        - property: RoleName
          value: "OrganizationAccountAccessRole"
  
  controltower:
    filters:
      CloudTrailTrail:
        - property: Name
          type: contains
          value: "aws-controltower-"
        - property: Name
          type: contains
          value: "ControlTower"
        - property: Name
          type: contains
          value: "AWSControlTower"
      CloudWatchLogsLogGroup:
        - property: logGroupName
          type: contains
          value: "/aws/lambda/aws-controltower-"
        - property: logGroupName
          type: contains
          value: "/aws/lambda/ControlTower-"
        - property: logGroupName
          type: contains
          value: "/aws/controltower/"
        - property: logGroupName
          type: contains
          value: "/aws/ControlTower/"
      CloudWatchEventsRule:
        - property: Rule
          value: "aws-controltower-ConfigComplianceChangeEventRule"
        - property: Rule
          type: contains
          value: "aws-controltower-"
        - property: Rule
          type: contains
          value: "ControlTower"
        - property: Rule
          type: contains
          value: "AWSControlTower"
        - property: Name
          value: "aws-controltower-ConfigComplianceChangeEventRule"
        - property: Name
          type: contains
          value: "aws-controltower-"
        - property: Name
          type: contains
          value: "ControlTower"
        - property: Name
          type: contains
          value: "AWSControlTower"
      CloudWatchEventsTarget:
        - property: Rule
          value: "aws-controltower-ConfigComplianceChangeEventRule"
        - property: "Target ID"
          value: "Compliance-Change-Topic"
        - property: Rule
          type: contains
          value: "aws-controltower-"
        - property: Rule
          type: contains
          value: "ControlTower"
        - property: "Target ID"
          type: contains
          value: "ControlTower"
        - property: Name
          type: contains
          value: "aws-controltower-"
        - property: Name
          type: contains
          value: "ControlTower"
      SNSTopic:
        - property: TopicARN
          type: contains
          value: ":aws-controltower-SecurityNotifications"
        - property: TopicARN
          type: contains
          value: ":aws-controltower-"
        - property: TopicARN
          type: contains
          value: ":ControlTower-"
        - property: Name
          type: contains
          value: "aws-controltower-"
        - property: Name
          type: contains
          value: "ControlTower"
      SNSSubscription:
        - property: ARN
          type: contains
          value: ":aws-controltower-SecurityNotifications"
        - property: ARN
          type: contains
          value: ":aws-controltower-"
        - property: ARN
          type: contains
          value: ":ControlTower-"
        - property: TopicARN
          type: contains
          value: ":aws-controltower-"
        - property: TopicARN
          type: contains
          value: ":ControlTower-"
        - property: Name
          type: contains
          value: "aws-controltower-"
        - property: Name
          type: contains
          value: "ControlTower"
        - property: Owner
          type: contains
          value: "aws-controltower-"
        - property: Owner
          type: contains
          value: "ControlTower"
      LambdaFunction:
        - property: Name
          type: contains
          value: "aws-controltower-"
        - property: Name
          type: contains
          value: "ControlTower"
        - property: Name
          type: contains
          value: "AWSControlTower"
        - property: FunctionName
          type: contains
          value: "aws-controltower-"
        - property: FunctionName
          type: contains
          value: "ControlTower"
      SecretsManagerSecret:
        - property: ARN
          type: contains
          value: "aws-controltower-"
        - property: ARN
          type: contains
          value: "events!connection"
        - property: ARN
          type: contains
          value: "ControlTower"
        - property: Name
          type: contains
          value: "aws-controltower-"
        - property: Name
          type: contains
          value: "ControlTower"
        - property: Name
          type: contains
          value: "events!connection"
        - property: Description
          type: contains
          value: "events!connection"
        - property: "tag:aws:secretsmanager:owningService"
          value: "events"
        - property: "tag:aws:secretsmanager:owningService"
          type: contains
          value: "events"
      IAMRole:
        - property: RoleName
          type: contains
          value: "aws-controltower-"
        - property: RoleName
          type: contains
          value: "ControlTower"
        - property: RoleName
          type: contains
          value: "AWSControlTower"
        - property: Name
          type: contains
          value: "aws-controltower-"
        - property: Name
          type: contains
          value: "ControlTower"
      IAMPolicy:
        - property: PolicyName
          type: contains
          value: "aws-controltower-"
        - property: PolicyName
          type: contains
          value: "ControlTower"
        - property: PolicyName
          type: contains
          value: "AWSControlTower"
        - property: Arn
          type: contains
          value: "aws-controltower-"
        - property: Arn
          type: contains
          value: "ControlTower"
      IAMRolePolicyAttachment:
        - property: RoleName
          type: contains
          value: "aws-controltower-"
        - property: RoleName
          type: contains
          value: "ControlTower"
        - property: PolicyArn
          type: contains
          value: "aws-controltower-"
        - property: PolicyArn
          type: contains
          value: "ControlTower"
      IAMInstanceProfile:
        - property: InstanceProfileName
          type: contains
          value: "aws-controltower-"
        - property: InstanceProfileName
          type: contains
          value: "ControlTower"
        - property: Name
          type: contains
          value: "aws-controltower-"
        - property: Name
          type: contains
          value: "ControlTower"
      CloudFormationStack:
        - property: StackName
          type: contains
          value: "aws-controltower-"
        - property: StackName
          type: contains
          value: "ControlTower"
        - property: StackName
          type: contains
          value: "AWSControlTower"
        - property: StackId
          type: contains
          value: "aws-controltower-"
        - property: StackId
          type: contains
          value: "ControlTower"
      CloudFormationStackSet:
        - property: StackSetName
          type: contains
          value: "aws-controltower-"
        - property: StackSetName
          type: contains
          value: "ControlTower"
        - property: StackSetName
          type: contains
          value: "AWSControlTower"

  defaults:
    filters:
      EC2Subnet:
        - property: DefaultVPC
          value: "true"
      EC2DefaultSecurityGroupRule:
        - property: DefaultVPC
          value: "true"
      EC2DHCPOption:
        - property: DefaultVPC
          value: "true"
      EC2VPC:
        - property: IsDefault
          value: "true"
      EC2InternetGateway:
        - property: DefaultVPC
          value: "true"
      EC2InternetGatewayAttachment:
        - property: DefaultVPC
          value: "true"

accounts:
  'AWS_ACCOUNT_ID_PLACEHOLDER':
    presets:
      - organization
      - defaults
      - controltower